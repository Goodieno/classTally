// Admin panel
function renderAdmin() {
  view.innerHTML = `
    <a href="#" class="back" onclick="goHome(); return false;">â† í•™ë…„ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    <h2><strong>ê´€ë¦¬ì ë©”ë‰´</strong></h2>
    <button class="reset" onclick="masterReset(); return false;">ğŸ”„ ì „ì²´ ì´ˆê¸°í™”</button>
  `;
}

// Reset all classes
function masterReset() {
  if (!confirm("ì •ë§ ëª¨ë“  í•™ê¸‰ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
  for (let g = 1; g <= 6; g++) {
    for (let c = 1; c <= 8; c++) {
      const classKey = `${g}í•™ë…„-${c}ë°˜`;
      const ref = db.ref(`classes/${classKey}`);
      ref.child("points").set(0);
      ref.child("log").set(null);
    }
  }
  alert("ì „ì²´ ì´ˆê¸°í™” ì™„ë£Œ!");
}

// Helpers
function cssId(s) {
  return s.replace(/\s+/g, "_");
}
function escapeHtml(str) {
  return String(str)
    .replace(/&/g, "&amp;")
    .replace(/</g, "&lt;")
    .replace(/>/g, "&gt;")
    .replace(/"/g, "&quot;")
    .replace(/'/g, "&#039;");
}

// Attach functions to window so inline onclick works
window.renderGrade = renderGrade;
window.renderAdmin = renderAdmin;
window.masterReset = masterReset;
window.goHome = goHome;
